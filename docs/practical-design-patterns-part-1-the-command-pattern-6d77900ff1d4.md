# 实用设计模式第 1 部分:命令模式

> 原文：<https://medium.datadriveninvestor.com/practical-design-patterns-part-1-the-command-pattern-6d77900ff1d4?source=collection_archive---------9----------------------->

![](img/ea2f5148d4e61a2ce0c542ebd32dcbc4.png)

# 介绍

如今大多数软件都支持撤销/重做操作。例如，文本编辑器支持撤销我们写的内容，文件管理器支持撤销文件创建/删除等。让软件变得宽容并允许用户撤销他们的操作是 UX 的一个好习惯。

我一直想知道这是怎么实现的？在批判性分析中，看起来好像发生动作的对象从其他地方接收它们，就像一个*命令。*调用动作的对象、执行动作的对象和动作本身是*解耦的。*这正是命令模式存在的原因。

# 命令模式

命令模式是一种行为设计模式，即它试图简化对象之间的通信并提高灵活性，在这种模式中，操作被封装了执行对象中的动作所需的所有信息。

上述语句的意思是，我们创建一个表示操作的类，它的实例包含执行该操作所需的所有数据和方法。

# 命令模式的优势

1.  调用者和动作可以分离。调用者不需要知道操作是如何实现的。
2.  更改操作和添加新操作很容易。
3.  多个命令可以组合在一起按顺序执行。(这对于设计支持多级*撤销*的系统特别有帮助。)

# 实施和使用

我们将实现一个简单的家庭控制系统，它支持用户可以执行的一系列操作，以及一个允许用户撤销操作的撤销功能。

系统概述如下:

1.  Home 是在其上执行操作的类。
2.  SmartRemote 是允许在家中执行操作的类。
3.  FanOnCommand、FanoffCommand、FanSlowCommand、FanFastCommand 是 4 种受支持的命令。
4.  用户可以撤销她的操作。

下面是上面解释的系统的实现，展示了命令模式的强大功能。

这个例子足够复杂，可以恰当地展示设计模式的功能和优势。

# 结论

命令模式是一种行为设计模式，它允许将动作封装在一个对象中，该对象具有执行动作所需的所有信息。

这使得它成为实现具有 GUI 驱动的动作、事务行为、多级撤销等的系统的良好候选。

实用设计模式试图用强大而实用的解释和实现来涵盖最常见的设计模式。请继续关注本系列的下一篇文章。

*原载于 2018 年 9 月 17 日*[*【priyankvex.com】*](https://priyankvex.wordpress.com/2018/09/17/practical-design-patterns-part-1-the-command-pattern/)*。*