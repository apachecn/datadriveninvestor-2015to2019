# 如何进行代码评审

> 原文：<https://medium.datadriveninvestor.com/how-to-code-review-39f26ccd9848?source=collection_archive---------22----------------------->

[![](img/8dd5024388875eb0cd6b20a612fec298.png)](http://www.track.datadriveninvestor.com/1B9E)

我清楚地记得我新工作的第一天。这是我大学毕业后的第一份全职软件工程工作，我非常兴奋。我很早就到了，做完所有的人事工作后，我被护送到我的办公桌前。一进办公室，我的团队就向我投来惊讶的目光。“我们以为你要到星期三才来，”我的经理说。谢天谢地，它给我提供了一台电脑，所以我没有浪费时间设置自己。当我安排好一切后，我问我的经理我应该做什么。“嗯，我还没有为你计划任何事情，所以我认为你应该做一些代码审查”。什么？！代码审查？我吗？尽管你永远无法从我微笑热情的脸上看出来，我还是有点紧张。审查我同事的代码(请注意，大部分是高级/职员工程师)是一项令人生畏的任务，我承认，我不完全确定从哪里开始。

这让我想到了这篇文章《如何进行代码评审》，或者更具体地说，*我如何进行代码评审。*这是我为自己创建的通用指南，以帮助更好地评估我同事的代码(或任何相关代码)。这绝不是一个详尽的列表，也不意味着是，相反，这是一个高层次的标准，我相信它抓住了同行评审的核心。

编译/运行代码

这一步看似微不足道，但却是关键的一步。有很多情况下，文件没有提交，或者依赖关系没有更新，代码无法编译/运行。旧的“它在我的机器上工作”通常也不会被管理层接受。

确保代码符合验收标准

我认为大多数编写的代码都有一个预期的目的，尤其是在敏捷世界中，标签有接受标准(AC)。确保你正在评审的代码符合所有的 AC 是很重要的。这验证了代码正在完成它的预期目标。

确保所有测试运行正常

测试是捕捉 bug 的第一道防线。如果新的代码进入系统并破坏了现有的测试，那么事情就不对劲了。在本地和任何其他环境中运行测试，以确保引入的更改不会破坏任何东西。如果新代码没有任何测试覆盖，礼貌地要求一些:)

在不同环境中测试

根据项目的性质，这可能不可行。如果您的项目是为特定环境设计的，那么请确保它在两台物理上独立的机器上运行。这确保了在一个环境中没有隐藏的依赖关系(比如环境变量)。对于跨平台应用程序，尝试在几个不同的平台上进行测试。这不一定是全面的 QA 测试，事实上，也不应该是，但确实有一些情况下，我能够捕捉到由于平台差异造成的 bug。

扮演愚蠢的用户

这或多或少只是快速烟雾测试。尝试一些有效的输入，尝试一些无效的输入，尝试破解代码。这并不意味着深入，相反，这个想法是尝试可能导致错误的输入。

寻找代码气味

代码气味是指示腐烂代码的代码片段。一般来说，它们是小事情，但是随着时间的推移，它们会变得越来越大，直到您的代码库变得不可维护。审查代码时，要警惕这种代码气味。谁知道呢，在将来，你可能不得不对同样的代码进行修改，而清理别人留下的烂摊子可不是什么有趣的事情。

不要做一个无所不知的人

没有人喜欢无所不知的人，而且你也可能不是。如果有充分的理由做出改变，就让它为人所知。如果你不确定为什么要这样实现，就直接问。不要假设你的解决方案更好。如果有更好的方法，教育用户。最终，从代码评审中获得的知识只会让开发团队受益和成长

一些其他需要考虑的事情

记住为什么要进行代码评审总是一个好主意。你不仅是检查和评估代码的一双额外的眼睛，而且你还通知你自己对代码库做了什么改变。花相当多的时间查看代码。有很多次，我在一份公关上花了一个多小时，只是为了批准它并继续下去。这一小时没有被浪费，它被用来确保进入产品的代码符合工程团队制定的标准。不要匆忙地去读别人的代码，这对任何人都没有帮助。最终，所有的工程师都要对代码库负责。新代码和编写它的人一样是我的责任。

**# # TL；灾难恢复清单**

1)编译/运行代码

2)确保代码做了它需要做的事情

3)确保测试成功运行

4)在几种不同的环境中进行测试

5)阅读并理解变化

6)寻找改进和代码气味

友善一点