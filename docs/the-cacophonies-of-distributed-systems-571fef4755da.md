# 分布式系统的不和谐

> 原文：<https://medium.datadriveninvestor.com/the-cacophonies-of-distributed-systems-571fef4755da?source=collection_archive---------20----------------------->

如果您从未听说过 Deutsch + Gosling 的分布式计算谬论，那么您错过了大好时机！我鼓励你在这里查看它们。这些错觉在分布式系统领域被广泛认为是任何初级系统设计师或架构师所能做出的最痛苦的假设。我喜欢称之为“职业限制选择”。

![](img/eb255959a48cdb3cd18397d4699f64b4.png)

几年前，当我第一次了解到这八个谬误时，我决定把它们保留下来。我把它们写在一张纸上，贴在我办公室外面。那张纸还在，除了它现在有 11 个陈述——我猜一些随机的人又添加了一些谬误。

我将我的列表命名为“分布式系统的不和谐声音”，因为它们肯定不符合合理的分布式工程实践。它包括八个德语+高斯林最初的错误信念，加上三个免费赠品，这些都是我经过一段时间的艰苦学习得来的。尽情享受吧！

1.  **网络可靠。**期望服务 100%的时间都回复并不是一个好主意。硬件出现故障，软件得到更新，而这恰恰发生在关键任务“哦，上帝，请不要现在就出现故障”被调用的时候。重试和指数回退通常是很好的保护措施，尽管快速失败对于延迟敏感的服务可能更好。
2.  **潜伏期为零。**持有锁或在事务内部处理时进行远程调用的代码可能不是一个好主意。使用 TCP 需要时间，请记住，在 CPU 时间中，即使几毫秒也代表着永恒。
3.  **带宽无限。曾经尝试过从网上下载你的 30 分钟高分辨率中学舞蹈视频吗？网络是由我们所有人共享的，所以传输大量文件通常需要时间。这就是像 BitTorrent 这样的点对点服务存在的原因——它们能够从多个地方发送小块信息。如今，允许网络传递大量信息的标准包括压缩和更普遍的一些数据汇总技术。**
4.  网络是安全的。现在是 21 世纪，这可能是最明显的一个。不信任任何人技术包括 SSL、双因素身份验证或任何其他安全传输机制，这取决于隐私要求和所传输数据的敏感性。
5.  **拓扑不变。**有一天晚上，当我不得不熬夜登录十几台主机，以便手动修复硬编码的防火墙规则时，我感到有些高兴，有人精心设置了这些规则，认为一些知名客户永远不会更改他们的 IP 地址。DNS 名称可能会有所帮助。
6.  有一名管理员。一个人无法管理一个完全成熟的分布式系统，它无法扩展。拥有多个管理员需要权衡利弊；这意味着要有三个“a”——审计、授权和认证。
7.  **运输成本为零。**除非有人已经为您设置好了网络，否则一个中型组织一半的开发时间可能会花在网络设置上(咳咳，可能是云提供商？).
8.  **网络是同质的。**互操作性可以定义一个分布式系统的成败。在微服务世界中，高度可扩展的系统有几十个小服务，很可能有多种技术在起作用，它们都必须用一种共同的语言相互交流。这就是为什么像 REST，Web API 等标准。以牺牲其他“超快但不为人所知”的协议为代价变得方便。
9.  更新会立即发生。安全完成后，更新分布式系统需要时间。通常一次更新一个组件，并在每个步骤中验证系统是否正常。这意味着升级在一段时间内可能会“半途而废”。这也意味着新版本的组件将同时与旧版本的组件对话，这就需要向后兼容。据我所知，大多数分布式系统都被设计成让多个版本的系统相互通信。
10.  **证书很容易。证书的到期日期很难记住，因为离到期日期还有几个月或几年。记住一个很容易，但是你能应付几百个吗？您如何保证所有这些内容的安全，并确保仅在严格需要时才提供访问权限？如果不能通过集中存储和到期提醒服务妥善解决，证书管理可能会令人头疼。**
11.  **时钟同步。**这可能是我最喜欢的谬误，因为我真的真的不认为我的系统时钟会以任何可感知的方式失去同步。原来，我不久前天真地实现的一个系统的第一个版本的一个实例是大约 5.5 分钟不同步！我不会忘记我得知 Kerberos 允许最多 5 分钟的时钟偏差的那个晚上。

你对第十二个杂音有什么建议吗？请在评论中告诉我！

你喜欢这篇文章吗？ [**订阅**](https://geekonrecord.com/subscribe/) **通过邮件获取新帖。**

*照片由* [*莎拉琪莲*](https://unsplash.com/@rojekilian?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) *上* [*下*](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)