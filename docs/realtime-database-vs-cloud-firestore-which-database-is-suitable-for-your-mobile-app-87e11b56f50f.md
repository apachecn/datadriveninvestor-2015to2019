# 实时数据库与云 Firestore —哪种数据库适合您的移动应用

> 原文：<https://medium.datadriveninvestor.com/realtime-database-vs-cloud-firestore-which-database-is-suitable-for-your-mobile-app-87e11b56f50f?source=collection_archive---------0----------------------->

![](img/0100f280433bb437efc2b05fd3719aee.png)

“codes screengrab” by [Markus Spiske](https://unsplash.com/@markusspiske?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

谷歌的 Firebase 为支持实时数据同步的移动应用程序提供了两种基于云的客户端可访问的数据库解决方案——实时数据库(T0)和云商店(T2)。

实时数据库是 Firebase 的第一个也是最初的基于云的数据库。对于需要跨客户端实时同步状态的移动应用程序，这是一种高效、低延迟的解决方案。

云 Firestore 是 Firebase 最新的移动应用旗舰数据库。它是实时数据库的继承者，具有新的更直观的数据模型。Cloud Firestore 比实时数据库更丰富、更快速、更具可扩展性。

**哪个数据库是你手机应用的正确选择？**

在选择一个之前，请考虑实时数据库和云 Firestore 之间的以下差异。

**数据模型**

实时数据库和云 Firestore 都是 NoSQL 数据库。

实时数据库将数据存储为一个大的 JSON 树，这使得存储简单数据更容易，但难以组织大规模的复杂的分层数据。

Cloud Firestore 将数据存储在按集合排列的文档中。简单的数据存储在文档中，这很简单，与数据在 JSON 中的存储方式类似。使用文档中的子集合可以方便地组织复杂的分层数据。云 Firestore 需要更少的非规范化和数据扁平化。

**实时和离线支持**

实时数据库和云 Firestore 都有移动优先的实时 SDK，并支持离线应用程序的本地数据存储。

实时数据库只为 iOS 和 Android 上的移动客户端提供离线支持，而云 Firestore 为 iOS、Android 和 web 客户端提供离线支持。

**查询**

可以通过查询从任何数据库中检索、排序和过滤数据。

实时数据库支持具有有限排序和过滤功能的深度查询。在单个查询中，可以对属性进行排序或筛选，但不能两者都进行。默认情况下，查询是深度的，总是返回整个子树。

Cloud Firestore 支持带有复合排序和过滤的索引查询。与实时数据库不同，Cloud Firestore 允许链接过滤器，并在单个查询中对属性进行过滤和排序。您不必编写深度查询；您可以查询文档中的子集合，而不是整个集合或整个文档。默认的查询类型是索引，其中查询性能与结果集的大小成比例，而不是与数据集的大小成比例。

**写入和事务**

实时数据库方便了基本的写和事务操作。数据可以作为单个操作写入，而原生 SDK 中的事务需要完成回调。

云 Firestore 简化了原子写入和事务操作。操作可以自动批处理和完成，而事务会自动重复直到完成。

**可靠性和性能**

实时数据库是一个成熟的产品，你可以期待一个久经考验的产品的稳定性。实时数据库显示出非常低的延迟，因为数据库仅限于单个区域的分区可用性，这使得它成为频繁状态同步的一个很好的选择。

Cloud Firestore 目前处于测试版，测试版产品的稳定性并不总是与正式推出的产品相同。然而，Firebase 保证，当 Cloud Firestore 从测试版毕业时，它将比实时数据库具有更强的可靠性，因为它将在不同地区的多个数据中心存储您的数据，确保全球可扩展性和强大的可靠性。

**可扩展性**

在实时数据库中扩展需要分片，这意味着在单个数据库中扩展超过 100，000 个并发连接和 1，000 次写入/秒需要将数据分布到多个数据库中。

在 Cloud Firestore(beta 版之后)中，扩展将是完全自动的，这意味着将不再需要在多个实例之间划分数据。

**安全**

需要单独验证的实时数据库级联规则。实时数据库的唯一安全选项是 Firebase 数据库规则。它还级联读取和写入规则。需要使用' **validate'** 规则单独验证数据。

云 Firestore 为移动、web 和服务器 SDK 提供了更简单但更强大的安全性，其中移动和 web SDKs 使用云 Firestore 安全规则，而服务器 SDK 使用身份和访问管理(IAM)。此外，数据验证是自动的，除非使用通配符，否则规则不会级联。但是，规则可以限制查询，这意味着，如果查询结果可能包含用户无权访问的数据，整个查询将失败。

**定价**

这两种解决方案都可以在 Firebase 的 Spark(免费)、Flame(每月 25 美元)和 Blaze(按使用付费)定价计划中获得。

实时数据库只对带宽和存储收费，但收费更高。

Cloud Firestore 根据在您的数据库中执行的操作(读取、写入、删除)以及较低的带宽和存储收费。它支持谷歌应用引擎项目的每日支出限额，以确保你不会超过你感到舒适的成本。

**结论**

可以在同一个 Firebase 应用程序或项目中同时使用这两个数据库。这两个数据库都能够存储相同类型的数据，并且客户端库以相似的方式为它们工作。

如果你习惯使用测试版产品，那就在新项目中使用云 Firestore。云 Firestore 在一个基础设施上提供了额外的功能、性能和可伸缩性，该基础设施专门设计为在未来版本中集成更强大的功能。

您可以期待发现新的查询类型、更健壮的安全规则，以及为 Cloud Firestore 计划的一些其他高级功能带来的更好的性能。如果你决定同时使用这两个数据库或者选择其中一个用于你的移动应用，请记住上面提到的区别。