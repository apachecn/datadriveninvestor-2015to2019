# 目标 c 中的背景模式

> 原文：<https://medium.datadriveninvestor.com/background-modes-in-objective-c-72fadd622455?source=collection_archive---------10----------------------->

本文档描述了当应用程序在一段有限的时间内处于挂起状态时，如何在 iOS 应用程序中使用后台模式。

后台使用应用有很多限制。大多数情况下，当用户切换到另一个应用程序时，我们的应用程序会进入挂起模式。因此，我们的应用程序被允许在特定情况下以后台模式运行，如播放音频、获取位置更新、为报刊亭应用程序下载内容以及处理 VoIP 呼叫。

这些是 iOS 中可用的后台模式。

1)播放音频

2)接收位置更新

3)执行有限长度的任务

4)提供报刊亭套件下载

5)提供 IP 语音服务(VoIP)

1.  1.播放音频-

当您的应用程序确实需要在后台播放音频时，您应该使用此功能。为此，您必须在 info.plist 中添加一个键，以指示应用程序希望在后台运行代码。

步骤:

*   前往 Xcode
*   选择项目目标
*   点击信息
*   添加一个键“所需的背景模式”
*   值部分中有一个数组。选择应用程序播放音频。

您还需要添加代码来播放音频。有关代码的更多信息，请浏览本文最后给出的链接。

1.  2.接收位置更新

在位置后台模式中，应用程序在后台接收位置更新。如果这些信息真的对用户有用，你应该添加这个功能，否则苹果会拒绝你的应用。你还应该给 app 添加一个警告，说明“你的应用会增加电池使用量”。

在应用程序中添加背景位置的步骤:

*   前往 Xcode
*   选择项目目标
*   点击信息
*   添加一个键“所需的背景模式”
*   值部分中有一个数组。选择“应用程序注册位置更新”。

1.  执行有限长度的任务

对于此任务，您不需要在 info.plist 中指定任何键。此模式主要用于后台下载和上传。

要在后台实现代码，请实现

[[ui application shared application]beginbackgroundtaskswithexpirationhandler

该方法通知 iOS 您的应用程序使用后台模式，需要在后台运行代码，并在完成任务调用后运行

[[ui application shared application]end background task

通知您已完成任务。

1.  提供报摊套件下载

苹果为你提供构建具有一些特殊特征的杂志和报纸应用。报刊亭模式是专门针对报刊亭应用的。它有 API，可以帮助创建报摊应用程序。

在应用程序中添加报刊杂志套件下载的步骤:

*   前往 Xcode
*   选择项目目标
*   点击信息
*   添加一个键“所需的背景模式”
*   值部分中有一个数组。选择“App process newsstand kit 下载”。
*   然后添加一个新的关键的主要损失的关键，并选择“应用程序提出的内容在报刊亭”，并选择值“是”。

1.  提供 IP 语音服务(VoIP)

这种后台模式允许您在后台运行代码。

在应用程序中添加 IP 语音服务的步骤:

*   前往 Xcode
*   选择项目目标
*   点击信息
*   添加一个键“所需的背景模式”
*   值部分中有一个数组。选择“应用程序提供 IP 语音服务”。